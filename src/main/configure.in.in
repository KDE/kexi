
dnl ======================================
dnl KNewStuff Configuration
dnl ======================================
dnl
dnl Copyright (C) 2004 Josef Spillner <spillner@kde.org>
dnl This file is to be used within KDE's build system.
dnl It defines $(LIB_KNEWSTUFF) if knewstuff has been found,
dnl and a HAVE_KNEWSTUFF #define statement is added.
dnl

AC_MSG_CHECKING([for KDE library: knewstuff])

ac_knewstuff_includes=NO ac_knewstuff_libraries=NO
knewstuff_libraries=""
knewstuff_includes=""

AC_CACHE_VAL(ac_cv_have_knewstuff,
[
AC_FIND_FILE(knewstuff/downloaddialog.h, $kde_incdirs, knewstuff_incdir)
ac_knewstuff_includes="$knewstuff_incdir"

AC_FIND_FILE(libknewstuff.so, $kde_libdirs, knewstuff_libdir)
ac_knewstuff_libraries="$knewstuff_libdir"

if test "$ac_knewstuff_includes" = NO || test "$ac_knewstuff_libraries" = NO; then
  ac_cv_have_knewstuff="have_knewstuff=no"
  ac_knewstuff_notfound=""
else
  have_knewstuff="yes"
fi
])

eval "$ac_cv_have_knewstuff"

if test "$have_knewstuff" != yes; then
  AC_MSG_RESULT([$have_knewstuff])
else
  AC_MSG_RESULT([$have_knewstuff (libraries $ac_knewstuff_libraries, headers $ac_knewstuff_includes)])

dnl  AC_DEFINE_UNQUOTED(HAVE_KNEWSTUFF, 1, [Add KNewStuff functionality.])
  CXXFLAGS="$CXXFLAGS -DHAVE_KNEWSTUFF"

  LIB_KNEWSTUFF='-lknewstuff'
  AC_SUBST(LIB_KNEWSTUFF)
fi
